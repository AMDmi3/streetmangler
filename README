           streetmangler - реестр и конвертер названий улиц
          ==================================================

  В российском OSM принято соглашение о правилах именования улиц [1],
  позволяющее (при соответствии ему подавляющей части базы, разумеется)
  избежать значительной части адресных ошибок, неполноты данных, упростить
  машинную обработку и просто использовать единый для всей страны стиль.

  Изначально для проверки соответствия и приведения в соответствие
  соглашению названий улиц был применён эвристический подход ([2]),
  позволивший поднять долю корректно именованных улиц с 55% до 96%,
  одновременно сократив количество адресных ошибок по меньшей мере в 5 раз,
  или на ~100000 при общем количестве адресов в базе 600000-700000.  Однако
  этот подход имеет свои ограничения в виде процента ложных срабатываний
  достаточного для необходимости ручной проверки замен, что не позволяет
  выложить инструмент для исправления названий в общий доступ или выполнять
  исправления регулярно в автоматическом режиме.

  Альтернативным решением является ведение словаря или реестра всех
  существующих названий улиц. Это позволит полностью избежать ложных
  срабатываний (помимо действительных ошибок в словаре), хотя и потребует
  значительной работы по наполнению базы, но если учесть что в
  эвристическом нормализаторе также используются словари (для определения
  частей речи) и он также требует ручной работы по проверке данных, новый
  подход видится гораздо более эффективным.

  Также автор надеется что проект найдёт применение и за пределами OSM.

  [1] http://wiki.openstreetmap.org/wiki/RU:ВикиПроект_Россия/Соглашение_об_именовании_дорог
  [2] http://forum.openstreetmap.org/viewtopic.php?id=11930

Возможности
===========

  На данный момент реализовано:
  - поиск точного совпадения
  - поиск неточного совпадения (разный регистр, разный порядок слов,
    сокращения статусной части)
  - поиск названий с предположительно отсутствующей статусной частью
  - класс для обработки названий улиц, который можно использовать
    в том числе и отдельно от базы, например в конверторах
  - утилита для выделения названий улиц из OSM XML дампа, и их
    классификации

  Пока не реализовано:
  - поиск с учётом орфографических ошибок
  - поддержку других языков
  - утилита для самотестирования (сверка базы с ней же для поиска
    потенциальных ошибок)
  - утилита для замены названий улиц в OSM
  - утилиты для сверки с другими источниками, например КЛАДР

База
====

  Данные берутся из OpenStreetMap. Используются все тэги addr:street,
  а также name линейных объектов с тегом highway, за исключением
  footway, cycleway, path и track.

  Формат базы тривиален - текстовый файл в кодировке UTF-8, по одному
  названию улицы на строку, текст после символа # считается
  комментарием и игнорируется, равно как и лишние пробелы.

  Смотри data/ru.txt

Библиотека
==========

  Исходный код из директории lib/ может использоваться как с, так
  и отдельно от базы. Смотри README.API

Сборка
======

  Необходимые зависимости:
    cmake
    icu
    expat2

  Сборка:
    cmake . && make

  Запуск тестов:
    ctest -V

  небольшая часть тестов должна проваливаться, так как покрывает
  нереализованную функциональность.

Утилиты
=======

  Единственная на данный момент утилита - from_osm. Она позволяет
  выбрать из файла в OSM XML формате все названия улиц, проверить
  их на наличие в базе и по результатам получить статистику и списки
  найденных/не найденных улиц. По списку не найденных улиц можно,
  например, пополнить базу.

  from_osm [-dhs] [-f database] file.osm
    -s  дополнительно к статистике по уникальным названиям улиц
        считать статистику по каждому отдельному использованию
        названия. Немного замедляет работу утилиты.
    -d  сохранять списки улиц в файлы в текущем каталоге:

          dump.all.txt - все названия из входного файла
          dump.canonical_form.txt - пока не заполняется
          dump.exact_match.txt - улицы, найденные в базе
          dump.spelling_fixed.txt - пока не заполняется
          dump.stripped_status.txt - пока не заполняется
          dump.no_match.txt - улицы, не найденные в базе
          dump.no_match.full.txt - улицы, не найденные
	      в базе, приведённые к полной форме (т.е. в формат
          подходящий для пополнения базы)

    -h  показать краткую справку
    -f  указать путь к базе данных (по умолчанию используется
        data/ru.txt из директории с исходниками проекта)
    -l  указать локаль (по умолчанию и единственная доступная на
        данный момент - "ru_RU")

Пополнение базы
===============

  Прежде всего, планируется постоянное пополнение базы данных. Эту
  работу можно условно разделить на 3 фазы:

  1) Доведение процента распознанных улиц до показателей
     эвристического нормализатора
  2) Добавление в базу всех улиц, присутствующих в OSM
  3) Периодический импорт новых названий, появляющихся в OSM

  На данный момент проект находится на 1 фазе, совпадают с базой
  16.79% уникальных названий улиц в России. Уровень эвристического
  нормализатора - 77.40%.

  Возможно, для облегчения 3 фазы будет создана отдельная база с
  не-улицами (и возможно она будет использована для исправления OSM,
  потому что "name=грунтовка" это, очевидно, ошибка).

  В будущем возможно введение более развитой структуры базы, например
  с учётом различных написаний имён собственных в названиях (т.е.
  "улица Льва Толстого" vs. "улица Л.Н.Толстого") (Komzpa@)

Проверочные источники
=====================

  Существуют источники корректных написаний названий улиц для Москвы
  ([3], [4]) и Санкт-Петербурга ([5], [6]), возможно других крупных
  городов, которые могут использоваться для проверки части данных.
  Однако, они сами нередко содержат ошибки.

  [3] http://www.mosclassific.ru/mClass/omkum_view.php
  [4] http://slovari.yandex.ru/~книги/Московские%20улицы/
  [5] http://spbculture.ru/ru/registry.html
  [6] http://slovari.yandex.ru/~книги/Петербургская%20топонимика/

Лицензия
========

  Код распространяется под GPLv3. Полный текст лицензии находится
  в файле COPYING.

  Названия улиц взяты из OpenStreetMap:
  http://www.openstreetmap.org/copyright

Автор
=====

  Дмитрий Маракасов <amdmi3@amdmi3.ru>
